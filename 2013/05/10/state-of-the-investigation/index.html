<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <title>State of the Investigation | TooNormal</title>
    
    <meta name="description" content="So I‚Äôve done a few scatterbrained posts lately that talk about things. Most of them had rather open ended conclusions, that were followed by wildly out-of-left field follow up posts. Here‚Äôs me making sense of that.
Evaluating Middlewares: Unity does good 3D, bad at JS Unity‚Äôs ‚ÄúJavaScript‚Äù isn‚Äôt JavaScript, it‚Äôs better named UnityScript. UnityScript is kinda terrible, essentially being just a different syntaxed less featured C#. But var is allowed, so uhhh‚Ä¶ *shrug*.">
    <meta name="author" content="Mike K">
    
    <link href="https://toonormal.com/an-old-hope.min.css" rel="stylesheet">
    <link href="https://toonormal.com/style.css" rel="stylesheet">
    <link href="https://toonormal.com/custom.css" rel="stylesheet">
    
    <link rel="apple-touch-icon" href="https://toonormal.com/apple-touch-icon.png">
    <link rel="icon" href="https://toonormal.com/favicon.ico">
    <meta name="generator" content="Hugo 0.74.1" />
    
    
    
    <script>
      function setTheme() {
      	

      }
    </script>
  </head>
  <body class="single">
    <script>
      setTheme();
    </script>
    <header class="header">
      <nav class="nav">
        <span class="logo">
        	<a href="https://toonormal.com/">TooNormal</a>
        </span>
		<div class="subtitle">a note-blog by Mike Kasprzak</div>
        <ul class="menu">
          <li>
            <a href="/blog/">Notebook &amp; Blog</a>
          </li>
          <li>
            <a href="/recipes/">Recipes</a>
          </li>
          <li>
            <a href="https://mikekasprzak.com">Portfolio</a>
          </li>
          <li>
            <a href="https://twitter.com/mikekasprzak">Twitter</a>
          </li>
          <li>
            <a href="https://youtube.com/mikekasprzak">YouTube</a>
          </li>
        </ul>
      </nav>
    </header>
    <main class="main">


<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">State of the Investigation</h1>
    <div class="post-meta">Mike K ¬∑ May 10, 2013
    </div>
  </header>
  <div class="post-content"><p>So I‚Äôve done a few scatterbrained posts lately that talk about things. Most of them had rather open ended conclusions, that were followed by wildly out-of-left field follow up posts. Here‚Äôs me making sense of that.</p>
<h2 id="evaluating-middlewares-unity-does-good-3d-bad-at-js">Evaluating Middlewares: Unity does good 3D, bad at JS</h2>
<p>Unity‚Äôs ‚ÄúJavaScript‚Äù isn‚Äôt JavaScript, it‚Äôs better named UnityScript. UnityScript is kinda terrible, essentially being just a different syntaxed less featured C#. But <strong>var</strong> is allowed, so uhhh‚Ä¶ *shrug*.</p>
<p>I still don‚Äôt care much for C#, but I think Unity‚Äôs 3D workflow is excellent. Fantastic even. I have 3D projects I want to do, and when the time comes, I‚Äôve convinced myself I should do them in Unity.</p>
<p>That‚Äôs 3D only though.</p>
<p>Haxe NME is cool, impressive and all, but it seems more a home for Adobe Flash refuges right now. Adobe, I know not what they‚Äôre thinking. I‚Äôm very confused by what they‚Äôre up to anymore, so I‚Äôm glad the Flash community has a way out. That said, I‚Äôm not particularly attached to the stricter typed Ecmascript language used by Flash/Haxe/Loom. I like JavaScript. I think JavaScript is great. So I don‚Äôt entirely feel right with Haxe NME. Highly recommended for Flash devs and people not me. üòâ</p>
<h2 id="javascript-is-cool">JavaScript is cool</h2>
<p>JavaScript *is* cool. I‚Äôve been working with it more and more lately. I made a game with <a href="http://twitter.com/laufman">Derek Laufman</a> of <a href="http://halfbot.com">Halfbot</a> using JavaScript for <a href="http://www.ludumdare.com/compo/">Ludum Dare 26</a>.</p>
<p><a href="http://sykhronics.com/toom/ld48/"><!-- raw HTML omitted --></a></p>
<p>Time was short during Ludum Dare, but we came up with some neat ideas, so we‚Äôre redoing the game. A ‚ÄúDirector‚Äôs Cut‚Äù if you will. It‚Äôs still taking place in the one room, but we‚Äôre planning to make both the room and the interactions you have inside it way more interesting.</p>
<p>JavaScript is cool, but I‚Äôm hitting a limit of HTML5 Canvas 2D now in the latest builds of TOOM. Chrome is fine, but Firefox has seen a significant framedrop after adding a few more Alpha operations. I will be reintroducing frame skipping in to the code, but this doesn‚Äôt bode well for the near term ‚Äúbest user experience‚Äù of TOOM in the broswer.</p>
<p>That said, I fully intend to finish the TOOM Director‚Äôs Cut as an HTML5+JavaScript game. It just may be, before its time, when it comes to Canvas 2D performance. Working in JavaScript has been great, and inspired some really great alternative-to-Unity workflow ideas. I‚Äôll come back to this. First though, what I think of App Packagers for Desktop HTML5 apps.</p>
<h2 id="packaged-html5-apps-tool-abandoned">Packaged HTML5 Apps (Tool): Abandoned</h2>
<p>In January 2012, I ported the unreleased Beneath Darkness prototype to some HTML5 packager. The company behind the packager was running a contest, and my intention was to enter the game in that contest. I wasn‚Äôt able to finish enough in time though, so I never submitted. That was fine though, as the winning games were definitely better and more complete.</p>
<p>The thing is, I can‚Äôt remember what that packager or the company was called.</p>
<p>It doesn‚Äôt really matter though. Like the Chrome Store, apps built for this packager were only for their proprietary HTML5 app store. I seem to remember a blue acorn, which may have been their logo. What disappoints me is that packager ran the game perfect. No issues with sound, no issues disabling linear filtering on image scaling, no issues loading files. Yet today, running the same prototype in both AppJS and Node-Webkit fails to load the map file. I‚Äôd be fine if Node-Webkit had no issues loading TOOM using PreloadJS, but it does. I might have been able to get NOOK working in Node-Webkit without any changes, but long story short I‚Äôm not happy.</p>
<p>Google‚Äôs Chrome App Packager stuff sounds like they solve the key issue (XMLHTTPRequest‚Äôs locally are okay), but it‚Äôs proprietary, and again only available to apps intended for distribution in the Chrome Store.</p>
<p>Even if it‚Äôs something that would be best fixed inside PreloadJS itself (support file://), that‚Äôs fine, but that‚Äôs not working 100% right now. I still have to do all my testing via a mini webserver running locally. My intent was to build a generic editor for a TOOM related project using HTML5, but I‚Äôve decided against it. Building a Tool in HTML5 only saves me time if it works‚Ä¶ right now‚Ä¶ today.</p>
<p>I‚Äôm very unhappy with the state of packaging HTML5 apps as Desktop Apps.</p>
<h2 id="renstalled-empscripten-embracing-webgl">Renstalled Empscripten, Embracing WebGL</h2>
<p>NOOK, BEARly SEASONed, and the unreleased Last Gun prototype were made using Emscripten (C++ and JS). TOOM and the unreleased Beneath Darkness prototype were written in pure JavaScript.</p>
<p>I‚Äôm glad I went back to pure JavaScript for TOOM though, because HOLY HELL I learned how REALLY GREAT some of the features of JavaScript are. You know JSON right? Well it‚Äôs <strong>even better</strong> in JavaScript. üôÇ</p>
<p><a href="/2013/05/05/nice-efficiency-things-about-javascript/">/nice-efficiency-things-about-javascript/</a></p>
<p>But like the headline says, I‚Äôve since reinstalled Emscripten. My post from earlier today details this process, which was notably different than from when I did it 1 year ago. Better‚Ä¶ except for the build time (70 minutes to build LLVM+Clang‚Ä¶ and I had to do it twice).</p>
<p><a href="/2013/05/10/emscripten-2-the-emscripting-or-setting-it-up-again-a-year-later/">/emscripten-2-the-emscripting/</a></p>
<p>And like the above article mentions, there‚Äôs now the AsmJS spec, which is an effort that makes JavaScript code run at only half the speed of native, versus the 6x slower than native I was promised last year.</p>
<p>I‚Äôve been sort-of against WebGL, ironically, being an OpenGL guy. Against is a harsh word. More like, ignoring it. After all, Microsoft will never add it to Internet Explorer‚Ä¶ <a href="http://www.theverge.com/2013/3/30/4165204/microsoft-bringing-webgl-support-internet-explorer-11-windows-blue">or will they</a>? Yes if the leaked Windows Blue version of Internet Explorer is to be believed, WebGL support is there now, so therefor coming soon.</p>
<p>Good.</p>
<p>What WebGL also brings is some potential Canvas graphics performance improvements. Your render code will have to be ported over to WebGL (OpenGL ES2), but with a little bit of batching, things get nice and quick.</p>
<p><a href="https://www.scirra.com/blog/107/boosting-mobile-html5-game-performance-with-webgl">https://www.scirra.com/boosting-mobile-html5-game-performance-with-webgl</a></p>
<p>Oh and Unreal Engine 3 now <a href="http://www.unrealengine.com/html5/">runs in the browser</a>, thanks to WebGL and Emscripten.</p>
<p>So alright. If Unreal Engine 3 can do it, surely a WebGL accelerated 2D engine can.</p>
<p>Now for the final piece.</p>
<h2 id="squirrel-like-javascript-but-nuttier">Squirrel! Like JavaScript but Nuttier!</h2>
<p>Between work on the TOOM Director‚Äôs Cut‚Ä¶ actually the other way around, I‚Äôve returned to my Squirrel research in a big way. As far as languages go, Squirrel is very much like JavaScript, but with everything on my JavaScript wishlist already implemented and working great (operator overloading, separate integer and float number types, 32bit, delegates woo woo, etc). Here‚Äôs some exploration:</p>
<p>&lt;/2013/05/06/squirrely-things-about-squirrel/&gt;</p>
<p>My only beef with the language is that I‚Äôm comfortable with using <strong>var</strong> in JavaScript, instead of <strong>local</strong> like Squirrel uses. That said, they‚Äôre not the same, and even <strong>var</strong> in JavaScript is actually a problem: Such a big problem, that the <a href="https://developer.mozilla.org/en-US/docs/JavaScript/ECMAScript_6_support_in_Mozilla">EcmaScript 6 spec</a> is introducing a new keyword <strong>let</strong> which works how you‚Äôd expect <strong>var</strong> to work.</p>
<p>Anyways, my mini-project of the day was to get Squirrel building in the browser (using Emscripten), and to build a very basic HTML interface for invoking the compiler and seeing the results. I‚Äôm betting that, since Unreal Engine 3 can run in the browser, it‚Äôs not unreasonable of me to expect instant execution of small Squirrel scripts. If that‚Äôs the case, then if paired WebGL, it may be reasonable to expect 30-60fps performance of a C++ game driven by Squirrel scripts. I‚Äôm not exactly interested in developing web games in Squirrel, but I‚Äôm investigating whether if I commit to Squirrel as a native game logic language, I can still generate playable web versions of games.</p>
<p>Long story short, I want the advantages I discovered in building TOOM in JavaScript in my Native Game Deving, and I already have proof that they do work.</p>
<p>Regrettably, I haven‚Äôt yet finished this Squirrel building project yet. Getting Emscripten working again ate up most of my afternoon (long Clang compiles). Then there was the power outage, and this blog post, so I think I‚Äôve done enough for today.</p>
<p>I may try just compiling Squirrel with Emscripten, then I‚Äôm calling it a night.</p>
<p>EDIT: Yep. So far working just fine with NodeJS.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h2 id="c11-support-feature-complete-in-clang-and-gcc-soon">C++11 Support Feature Complete in Clang and GCC soon!</h2>
<p>Now this is some awesome news. Clang 3.3 and GCC 4.8.1 are expected to be fully compliant with C++11 in their upcoming next versions.</p>
<p><strong>GCC</strong> ‚Äì <a href="http://gcc.gnu.org/projects/cxx0x.html">http://gcc.gnu.org/projects/cxx0x.html</a></p>
<p><strong>Clang</strong> ‚Äì <a href="http://clang.llvm.org/cxx_status.html">http://clang.llvm.org/cxx_status.html</a></p>
<p>There‚Äôs still the problem of compiler vendors being slow to upgrade their GCC and Clang versions to newer ones, but this milestone should be a good kick-start.</p>
<p>Something also rather neat, Clang is adding C++1y (C++14?) features already. One that caught my eye, <strong>BINARY LITERALS!</strong> So just like you do <strong>0x10</strong> for the hexadecimal number 16, you‚Äôll be able to do <strong>0b11010011</strong> to write binary. üòÄ</p>
<p>I have a header file, named Binary.h, that‚Äôs literally filled with every 8-bit combination of b0 to b11111111. Looks like I‚Äôll be able to retire it some day. üôÇ</p>
<h2 id="end-of-report">End of Report</h2>
<p>This post grew rather large ‚Äòeh? Alright then, I‚Äôm done.</p>
</div>
  
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="/2013/05/10/emscripten-2-the-emscripting-or-setting-it-up-again-a-year-later/">‚Üê Prev Page | Emscripten 2: The Emscripting (or setting it up again, a year later)</a>
    <a class="next" href="/2013/05/11/barebones-useful-generic-makefile/">Barebones Useful Generic Makefile | Next Page ‚Üí</a>
  </nav>
</footer></main>
<footer class="footer">
  <span>&copy; 2020 <a href="https://toonormal.com/">TooNormal</a></span>
  <span>&middot;</span>
  <span>Powered by <a href="https://gohugo.io/" rel="noopener" target="_blank">HugoÔ∏èÔ∏è</a>Ô∏è</span>
</footer>
<script src="https://toonormal.com/highlight.min.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>
</body>
</html>

